---
title: "Codemod CLI"
description: "Orchestrate large-scale code migrations with Codemod CLI."
icon: "terminal"
---

Codemod CLI (new) is accessible using the `npx codemod@next` command. The following commands and options are available:

- `workflow` — Manage workflows (see subcommands below)
- `jssg` — JavaScript ast-grep execution (see subcommands below)
- `init` — Initialize a new workflow project
- `login` — Login to a registry
- `logout` — Logout from a registry
- `whoami` — Show current authentication status
- `publish` — Publish a workflow
- `search` — Search for packages in the registry
- `run` — Run a codemod from the registry
- `cache` — Manage package cache (see subcommands below)

---

### `codemod@next workflow`

Manage and execute workflow YAMLs.

#### `workflow run`

Run a workflow.

```bash
npx codemod@next workflow run -w <workflow.yaml|directory> [--param key=value]
```
<ResponseField name="-w, --workflow <PATH>" type="string" required>
  Path to workflow file or directory.
</ResponseField>
<ResponseField name="--param <KEY=VALUE>" type="string">
  Workflow parameters (format: key=value).
</ResponseField>

#### `workflow resume`

Resume a paused workflow.

```bash
npx codemod@next workflow resume -i <ID> [-t <TASK>] [--trigger-all]
```
<ResponseField name="-i, --id <ID>" type="string" required>
  Workflow run ID.
</ResponseField>
<ResponseField name="-t, --task <TASK>" type="string">
  Task ID to trigger (can be specified multiple times).
</ResponseField>
<ResponseField name="--trigger-all" type="boolean">
  Trigger all awaiting tasks.
</ResponseField>

#### `workflow validate`

Validate a workflow file.

```bash
npx codemod@next workflow validate -w <workflow.yaml>
```
<ResponseField name="-w, --workflow <FILE>" type="string" required>
  Path to workflow file.
</ResponseField>

| Check                       | Ensures                                |
| --------------------------- | -------------------------------------- |
| Schema validation           | YAML matches the workflow spec         |
| Unique IDs                  | Node & template IDs are unique         |
| Dependency validation       | Every `depends_on` exists              |
| Cyclic dependency detection | DAG has no cycles                      |
| Template references         | All `template:` IDs exist              |
| Matrix validation           | `from_state` matches schema            |
| State schema validation     | `state.schema` is valid                |
| Variable syntax             | `${{…}}` uses `params`, `env`, `state` |

<Info>
  Why validate?

   Validation catches issues before execution, saving time and preventing runtime errors.
</Info>

<Accordion title="Validation vs. Logical Correctness">
  The `workflow validate` command ensures your YAML is syntactically correct and follows the schema, but it cannot verify:

  - **Logical correctness**: Whether your workflow does what you intend
  - **Runtime behavior**: How your workflow behaves with real data
  - **Dependencies**: Whether external files/scripts exist
  - **State consistency**: Whether state updates are logically sound
  </Accordion>

#### `workflow status`

Show workflow run status.

```bash
npx codemod@next workflow status -i <ID>
```
<ResponseField name="-i, --id <ID>" type="string" required>
  Workflow run ID.
</ResponseField>

#### `workflow list`

List workflow runs.

```bash
npx codemod@next workflow list [-l <LIMIT>]
```
<ResponseField name="-l, --limit <LIMIT>" type="number">
  Number of workflow runs to show. (default: 10)
</ResponseField>

#### `workflow cancel`

Cancel a workflow run.

```bash
npx codemod@next workflow cancel -i <ID>
```
<ResponseField name="-i, --id <ID>" type="string" required>
  Workflow run ID.
</ResponseField>

### `codemod@next jssg`

See [this page](/cli/jssg) for full details and options for running and testing jssg codemods.

---

### `codemod@next init`

Initialize a new workflow project.

```bash
npx codemod@next init [PATH] [options]
```

<ResponseField name="[PATH]" type="string">
  Project directory name.
</ResponseField>

<ResponseField name="--name <NAME>" type="string">
  Project name (defaults to directory name).
</ResponseField>

<ResponseField name="--project-type <PROJECT_TYPE>" type="string">
  Project type: `shell`, `ast-grep-js`, `ast-grep-yaml`.
</ResponseField>

<ResponseField name="--language <LANGUAGE>" type="string">
  Target language.
</ResponseField>

<ResponseField name="--description <DESCRIPTION>" type="string">
  Project description.
</ResponseField>

<ResponseField name="--author <AUTHOR>" type="string">
  Author name and email.
</ResponseField>

<ResponseField name="--license <LICENSE>" type="string">
  License.
</ResponseField>

<ResponseField name="--private" type="boolean">
  Make package private.
</ResponseField>

<ResponseField name="--force" type="boolean">
  Overwrite existing files.
</ResponseField>

<ResponseField name="--no-interactive" type="boolean">
  Use defaults without prompts.
</ResponseField>

### `codemod@next login`

Login to a registry.

```bash
npx codemod@next login [--registry <REGISTRY>] [--scope <SCOPE>]
```

<ResponseField name="--registry <REGISTRY>" type="string">
  Registry URL.
</ResponseField>

<ResponseField name="--scope <SCOPE>" type="string">
  Organization or user scope for publishing.
</ResponseField>

### `codemod@next logout`

Logout from a registry.

```bash
npx codemod@next logout [--registry <REGISTRY>] [--all]
```

<ResponseField name="--registry <REGISTRY>" type="string">
  Registry URL to logout from.
</ResponseField>

<ResponseField name="--all" type="boolean">
  Logout from all registries.
</ResponseField>

### `codemod@next whoami`

Show current authentication status.

```bash
npx codemod@next whoami [--registry <REGISTRY>] [--detailed]
```

<ResponseField name="--registry <REGISTRY>" type="string">
  Registry URL to check.
</ResponseField>

<ResponseField name="--detailed" type="boolean">
  Show detailed information including token scopes.
</ResponseField>

### `codemod@next publish`

Publish a workflow to a registry.

```bash
npx codemod@next publish [PATH] [options]
```

<ResponseField name="[PATH]" type="string">
  Path to codemod directory.
</ResponseField>

<ResponseField name="--version <VERSION>" type="string">
  Explicit version override.
</ResponseField>

<ResponseField name="--registry <REGISTRY>" type="string">
  Target registry URL.
</ResponseField>

<ResponseField name="--tag <TAG>" type="string">
  Tag for the release.
</ResponseField>

<ResponseField name="--access <ACCESS>" type="string">
  Access level (`public`, `private`).
</ResponseField>

<ResponseField name="--dry-run" type="boolean">
  Validate and pack without uploading.
</ResponseField>

### `codemod@next search`

Search for packages in the registry.

```bash
npx codemod@next search [QUERY] [options]
```
