---
title: "ai"
icon: "wand-magic-sparkles"
iconType: "solid"
---

<ResponseField name="ai(instructions)" />

Replaces code found with `ast-grep` pattern using instructions provided to LLM.

<Note>`ai(instructions)` requires `--OPENAI_API_KEY=somekey` to be passed to workflow.</Note>

### Parameters

<ParamField path="instructions" type="string | readonly string[]" required>
Instructions to LLM in natural language with before and after examples.
</ParamField>

<RequestExample>
```tsx example
    import { files } from '@codemod.com/workflow'

    await files()
      .jsFam()
      .astGrep`$SCHEMA($$$REST, [$$$ACTIONS])`
      .ai`
        SCHEMA could be one of 'any', 'array', 'bigint', 'blob', 'boolean', 'custom', 'date', 'enum_', 'instance', 'intersect',
        'lazy', 'literal', 'looseObject', 'looseTuple', 'map', 'nan', 'never', 'nonNullable', 'nonNullish', 'nonOptional',
        'null_', 'nullable', 'nullish', 'number', 'object', 'objectWithRest', 'optional', 'picklist', 'record', 'set',
        'strictObject', 'strictTuple', 'string', 'symbol', 'tuple', 'tupleWithRest', 'undefined_', 'union', 'unknown', 'variant',
        'void_'
        ACTIONS is array of calls to one of 'bic', 'brand', 'bytes', 'check', 'creditCard', 'cuid2', 'decimal', 'email',
        'emoji', 'empty', 'endsWith', 'every', 'excludes', 'finite', 'hash', 'hexadecimal', 'hexColor', 'imei', 'includes',
        'integer', 'ip', 'ipv4', 'ipv6', 'isoDate', 'isoDateTime', 'isoTime', 'isoTimeSecond', 'isoTimestamp', 'isoWeek',
        'length', 'mac', 'mac48', 'mac64', 'maxBytes', 'maxLength', 'maxSize', 'maxValue', 'mimeType', 'minBytes',
        'minLength', 'minSize', 'minValue', 'multipleOf', 'nonEmpty', 'notBytes', 'notLength', 'notSize', 'notValue', 'octal',
        'readonly', 'regex', 'safeInteger', 'size', 'some', 'startsWith', 'toLowerCase', 'toMaxValue', 'toMinValue', 'toUpperCase',
        'transform', 'trim', 'trimEnd', 'trimStart', 'ulid', 'url', 'uuid', 'value','forward'
        
        If $SCHEMA is not one of SCHEMA, skip
        If $$$ACTIONS is not one of ACTIONS, skip

        If skipping - return same string

        Take into account recursive replacements
        
        Example
        Before: v.string('some string', [v.email()])
        After: v.pipe(v.string('some string'), v.email())
        `
```

```bash running codemod
npx codemod@latest codemod-name --OPENAI_API_KEY=$OPENAI_API_KEY
```
</RequestExample>

<ResponseExample>
```ts before
v.string([v.email(), v.endsWith('@gmail.com')])
```
```ts after
v.pipe(v.string(), v.email(), v.endsWith('@gmail.com'))
```
</ResponseExample>
